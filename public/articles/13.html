<h1 class="article-title">Python (FastAPI). –°—Ç–∞—Ç—å—è. –ü—Ä–æ–µ–∫—Ç REST API - UnivercityAPI</h1>
<div class="article-meta">
    <span>üóì 23 –∏—é–Ω—è 2025</span>
    <span>üè∑Ô∏è Python, FastAPI</span>
</div>
<h3 class="section-title">–ö–∞—Ä–∫–∞—Å –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–µ –∞–ø–∏</h3>
<p>–í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø–∏—à–µ–º –∞–ø–∏ –¥–ª—è –Ω–µ–∫–æ–µ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞. –ö–∞–∫ –∏ –≤ –ª—é–±–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ, –µ—Å—Ç—å –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç—ã, —Ç–∞–∫ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–º–µ–µ—Ç—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã, –∫—É—Ä—Å—ã –∏ –ø—Ä–æ—á–µ–µ. –í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ —ç—Ç–æ –æ–ø—É—â–µ–Ω–æ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç—ã –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
<p>–°–æ–∑–¥–∞–¥–∏–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ–º —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å –≤ app. –§–∞–π–ª req.txt –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:</p>
<pre><code class="lang-plain">fastapi[all]</code></pre>
<p>–ù–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ —Å–æ–∑–¥–∞–¥–∏–º —Ç–∞–∫ –∂–µ —Ñ–∞–π–ª tests.py –¥–ª—è —Ç–µ—Å—Ç–æ–≤. –ù–∞—á–Ω–µ–º –ø–∏—Å–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ª–æ–≥–∏–∫–∞ –ë–î –æ–ø—É—â–µ–Ω–∞ –¥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è PostgreSQL –¥–∞–ª–µ–µ):</p>
<pre><code class="lang-py">import os

from fastapi import FastAPI

from utils import json_to_dict_list

path_to_json = os.path.join(os.path.dirname(os.path.dirname(os.path.abspath(__file__))), 'students.json')

app = FastAPI()


@app.get("/")
def home_page():
    return {"message": "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"}

@app.get("/students")
def get_all_students(
    course: int | None = None,
    major: str | None = None,
    enrollment_year: int | None = None,
):
    students = json_to_dict_list(path_to_json)
    if course or major or enrollment_year:
        return_students = []
        if course:
            return_students = [student for student in students if student['course'] == course]
        if major:
            return_students = [student for student in students if student['major'].lower() == major.lower()]
        if enrollment_year:
            return_students = [student for student in students if student['enrollment_year'] == enrollment_year]
        return return_students
    else:
        return students

@app.get("/students/{id}")
def get_student_by_id(id: int):
    students = json_to_dict_list(path_to_json)
    for student in students:
        if student["id"] == id:
            return student
    return "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"
</code></pre>
<p>–ü–æ–∫–∞, –ø–æ–º–∏–º–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (—Ç–∏–ø–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î), –æ–ø–∏—Å–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–µ—Ä–Ω–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (—Ç–∞–∫ –∂–µ –æ–ø–∏—Å–∞–Ω–∞ —Ñ—É–∫–Ω—Ü–∏—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–Ω—Ñ—ã –¥–ª—è –∫–æ—Ä–Ω—è –∞–ø–∏ (/)). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ (course, major –∏ enrollment_year) –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –¢–∞–∫ –∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–æ—É—Ç–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ –µ–≥–æ –∞–π–¥–∏.</p>
<h3 class="section-title">Pydantic, –º–æ–¥–µ–ª–∏</h3>
<p>–ú–æ–¥–µ–ª—å –≤ FastAPI ‚Äî —ç—Ç–æ –Ω–µ—á—Ç–æ –≤—Ä–æ–¥–µ —Å—Ö–µ–º—ã –∏–ª–∏ —à–∞–±–ª–æ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–∫–∞–∑–∞—Ç—å: "–í–æ—Ç –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –≤—ã–≥–ª—è–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º." –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –º–æ–¥–µ–ª–µ–π –≤ FastAPI:</p>
<ul>
    <li><b>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:</b> –° –ø–æ–º–æ—â—å—é Pydantic –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏–º–µ–Ω–µ–º –∏ –≤–æ–∑—Ä–∞—Å—Ç–æ–º, –º–æ–¥–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –∏–º—è ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∞ –≤–æ–∑—Ä–∞—Å—Ç ‚Äî —á–∏—Å–ª–æ.</li>
    <li><b>–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:</b> –ú–æ–¥–µ–ª–∏ –ø–æ–º–æ–≥–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –≤–∞—à–µ–≥–æ API. –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ –º–æ–≥—É—Ç –æ–∂–∏–¥–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ.</li>
    <li><b>–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:</b> –ú–æ–¥–µ–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ SQLAlchemy, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.</li>
    <li><b>–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:</b> –ú–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –¥–∞—Ç—É, –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –æ–±—ä–µ–∫—Ç –¥–∞—Ç—ã.</li>
    <li><b>–û–ø–∏—Å–∞–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä:</b> –ú–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.</li>
    <li><b>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã:</b> –ú–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ —É–ª—É—á—à–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ API.</li>
</ul>
<p>Pydantic ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ FastAPI –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –Ω—É–∂–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º. –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è –º–æ–¥–µ–ª–∏ –≤ FastAPI, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Pydantic. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º—ã –æ–ø–∏—Å—ã–≤–∞–µ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã, –≤ –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. </p>
<p>–ö–æ–¥ –≤ —Ñ–∞–π–ª–µ models.py:</p>
<pre><code class="lang-py">import re
from enum import Enum
from pydantic import BaseModel, EmailStr, Field, field_validator
from datetime import date, datetime
from typing import Optional


class Major(str, Enum):
    informatics = "–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞"
    economics = "–≠–∫–æ–Ω–æ–º–∏–∫–∞"
    history = "–ò—Å—Ç–æ—Ä–∏—è"
    math = "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
    bio = "–ë–∏–æ–ª–æ–≥–∏—è"
    eco = "–≠–∫–æ–ª–æ–≥–∏—è"
    psyho = "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è"


class Student(BaseModel):
    id: int
    phone_number: str = Field(..., description="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –≤ —Ñ–æ—Ä–º–∞—Ç–µ '+7–•–•–•–•–•–•–•–•–•–•'")
    last_name: str = Field(..., min_length=1, max_length=50, description="–§–∞–º–∏–ª–∏—è, –æ—Ç 1 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤")
    date_of_birth: date = Field(..., description="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î")
    email: EmailStr = Field(..., description="–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞")
    address: str = Field(..., min_length=10, max_length=200, description="–ê–¥—Ä–µ—Å, –Ω–µ –±–æ–ª–µ–µ 200 —Å–∏–º–≤–æ–ª–æ–≤")
    enrollment_year: int = Field(..., ge=2002, description="–ì–æ–¥ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è, –Ω–µ –º–µ–Ω—å—à–µ 2002")
    major: Major = Field( ..., description="–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å")
    course: int = Field(..., ge=1, le=5, description="–ö—É—Ä—Å, –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 1 –¥–æ 5")
    special_notes: Optional[str] = Field(
        default=None,
        max_length=500,
        description="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, –Ω–µ –±–æ–ª–µ–µ 500 —Å–∏–º–≤–æ–ª–æ–≤",
    )

    @field_validator("phone_number")
    @classmethod
    def validate_phone_number(cls, value: str) -> str:
        if not re.match(r'^\+\d{2,15}$', value):
            raise ValueError('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "+" –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 2 –¥–æ 17 —Ü–∏—Ñ—Ä')
        return value

    @field_validator("date_of_birth")
    @classmethod
    def validate_date_of_birth(cls, value: date):
        if value and value >= datetime.now().date():
            raise ValueError('–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º')
        return value
</code></pre>
<p>–ö–ª–∞—Å—Å Major –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç str –∏ Enum –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π - –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π —á–ª–µ–Ω —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –≤–µ–∑–¥–µ, –≥–¥–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∏–∑ —á–ª–µ–Ω–æ–≤ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.</p>
<p>–ö–ª–∞—Å—Å Student –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –µ–≥–æ –¥–∞–Ω–Ω—ã—Ö. –û–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—É–¥–µ–Ω—Ç–µ. –ö–ª–∞—Å—Å –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç BaseModel - —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞—à –∫–ª–∞—Å—Å –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Pydantic –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö. –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å, –∫–∞–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º, —Ç–∞–∫ –∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —É—Å–ª–æ–≤–∏–π. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –æ–ø–∏—Å–∞–Ω–∏–∏:</p>
<ul>
    <li><b>title:</b> –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–ª—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ API.</li>
    <li><b>examples:</b> –ü—Ä–∏–º–µ—Ä—ã –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—è. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–±—É—á–µ–Ω–∏—è.</li>
    <li><b>gt, ge, lt, le:</b> –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–±–æ–ª—å—à–µ, –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ, –º–µ–Ω—å—à–µ, –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ).</li>
    <li><b>multiple_of:</b> –ß–∏—Å–ª–æ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Ç–Ω–æ.</li>
    <li><b>max_digits, decimal_places:</b> –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤).</li>
</ul>
<p><b>Pydantic –º–æ–¥–µ–ª—å –∏ GET —ç–Ω–¥–ø–æ–∏–Ω—Ç</b></p>
<p>–í GET –∑–∞–ø—Ä–æ—Å–∞—Ö, –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–æ–¥–µ–ª–∏, –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –ø–æ–π–¥–µ—Ç –∫–∞–∫–∞—è-—Ç–æ –æ—à–∏–±–∫–∞ –≤ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, —Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–ª—É—á–∏—Ç –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–∞ –±—ç–∫–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–± –≤—Å–µ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å response_model (–º–æ–¥–µ–ª—å –æ—Ç–≤–µ—Ç–∞). –ü–µ—Ä–µ–¥–∞—Ç—å –µ–µ –º–æ–∂–Ω–æ –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –ª–∏–±–æ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ, –ª–∏–±–æ —á–µ—Ä–µ–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø:</p>
<pre><code class="lang-py">@app.get("/student", response_model=Student)
def get_student_from_param_id(student_id: int) -> Student:
def get_student_from_param_id(student_id: int) -> List[Student]:</code></pre>
<p>–ß—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –º—ã –≤–µ—Ä–Ω–µ–º —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑ –º–æ–¥—É–ª—è typing –ø–µ—Ä–µ–¥–∞—Ç—å List, –∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö –Ω–∞—à—É –º–æ–¥–µ–ª—å.</p>
<p> –°–æ–∑–¥–∞—Ç–µ–ª—é FastApi –∑–∞–¥–∞–ª–∏ –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º –∫–∞–∫ –æ–±–æ–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º request_body (—Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞) —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –∏ –æ–Ω –ø–æ–¥–µ–ª–∏–ª—Å—è –æ–¥–Ω–æ–π —Ö–∏—Ç—Ä–æ—Å—Ç—å—é. –û–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å, –±–µ–∑ Pydantic, –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (request body), –∫–æ–¥ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç, –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–± —Ä–µ—à–∏—Ç—å –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π Depends –∏–∑ –ø–∞–∫–µ—Ç–∞ fastapi. –û–±—ä—è–≤–∏–º request_body —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<pre><code class="lang-py">def get_all_students_course(request_body: RBStudent = Depends()) -> List[SStudent]:</code></pre>
<p><b>–û–±—Ä–∞–±–æ—Ç–∫–∞ PUT DELETE –º–µ—Ç–æ–¥–æ–≤</b></p>
<p>PUT –∏ DELETE –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:</p>
<pre><code class="lang-py">@app.put("/update_student/{student_id}")
def update_student_handler(student_id: int, new_data: StudentUpdate) -> Student | str:
    students = json_to_dict_list(path_to_json)
    student = None
    for s in students:
        if s["id"] == student_id:
            student = s
    if not student:
        return "NOT FOUND"
    student.update()
    return student


@app.delete("/delete_student/{student_id}")
def delete_student_handler(student_id: int):
    students = json_to_dict_list(path_to_json)
    student = None
    for s in students:
        if s["id"] == student_id:
            student = s
    if not student:
        raise HTTPException(404, "USER NOT FOUND")
    student.delete()
    return student
</code></pre>
<h3 class="section-title">PostgreSQL, SQLAlchemy, Alembic</h3>
<p>–ú–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ë–î) —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö –∏—Å—Ç–æ—Ä–∏—é –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤–µ—Ä—Å–∏—è–º. –ú–∏–≥—Ä–∞—Ü–∏–∏  –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã, —Ç–æ –µ—Å—Ç—å, –µ—Å–ª–∏ —É –≤–∞—Å –¥–æ–±–∞–≤–∏—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞, —É–¥–∞–ª–∏—Ç—Å—è, –∏–∑–º–µ–Ω—è—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∏ - –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–∞–º –ø–æ–∑–≤–æ–ª—è—Ç –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∏ –Ω–µ —Ç–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é. –ó–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –∂–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—á—é—Ç –¥—Ä—É–≥–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä volumes –∏–ª–∏ –±—ç–∫–∞–ø—ã.</p>
<p>SQLAlchemy ‚Äî —ç—Ç–æ –º–æ—â–Ω–∞—è –∏ –≥–∏–±–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Python. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:</p>
<ul>
    <li>SQLAlchemy Core: –≠—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.</li>
    <li>SQLAlchemy ORM (Object-Relational Mapper): –≠—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ Python. ORM –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–û–û–ü) –∏ —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.</li>
</ul>
<p>Alembic ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ—Å–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å SQLAlchemy. –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª –¥–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—å SQLAlchemy, –∑–∞ —Å—á–µ—Ç —á–µ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Alembic –≤ SQLAlchemy –ø—Ä–æ—Å—Ç–æ. Alembic –ø–æ–∑–≤–æ–ª—è–µ—Ç: 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–µ–π SQLAlchemy 2. –ü—Ä–∏–º–µ–Ω—è—Ç—å, –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ 3. –£–ø—Ä–∞–≤–ª—è—Ç—å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.</p>
<p>–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ. –¢–∞–∫ –∂–µ –Ω–∞–¥–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã:</p>
<pre><code class="lang-bash">pip install alembic asyncpg sqlalchemy pydantic-settings</code></pre>
<p>asyncpg - —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è PostgreSQL, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å SQLAlchemy, –∞ pydantic-settings - –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫.</p>
<p>–ó–∞–ø–æ–ª–Ω–∏–º —Ñ–∞–π–ª database.py:</p>
<pre><code class="lang-py">from sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker, AsyncAttrs
from sqlalchemy.orm import DeclarativeBase, declared_attr


DB_HOST = 'localhost'
DB_PORT = '5432'
DB_NAME = 'postgres'
DB_USER = 'postgres'
DB_PASSWORD = 'postgres'

DATABASE_URL = f'postgresql+asyncpg://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}'

# –°–æ–∑–¥–∞—ë—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL, –∏—Å–ø–æ–ª—å–∑—É—è –¥—Ä–∞–π–≤–µ—Ä asyncpg
engine = create_async_engine(DATABASE_URL)
# –°–æ–∑–¥–∞—ë—Ç —Ñ–∞–±—Ä–∏–∫—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫.
# –°–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
async_session_maker = async_sessionmaker(engine, expire_on_commit=False)

# –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –≤—Å–µ –º–æ–¥–µ–ª–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –∏
# –∞–∫–∫—É–º—É–ª–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö, —á—Ç–æ–±—ã Alembic –º–æ–≥ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è
# —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –º–æ–¥–µ–ª—è–º–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
class Base(AsyncAttrs, DeclarativeBase):
    __abstract__ = True

    # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º—è —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞,
    # –ø—Ä–µ–æ–±—Ä–∞–∑—É—è –µ–≥–æ –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –∏ –¥–æ–±–∞–≤–ª—è—è –±—É–∫–≤—É 's'
    # –≤ –∫–æ–Ω—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞—Å—Å User –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É users).
    @declared_attr.directive
    def __tablename__(cls) -> str:
        return f"{cls.__name__.lower()}'s"
</code></pre>
